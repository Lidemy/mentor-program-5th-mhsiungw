<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css" />
    <link rel="stylesheet" href="./css.css" />
    <title>TO DO LIST</title>
</head>
<body>
    <div class='wrapper'>
        <h1>To Do List</h1>
        <div class='todo__add'>
            <input type="text"/>
            <button class='btn-add'>新增</button>
        </div>
         <div class='todos'>
        </div>
    </div>

    <script>
        document
            .querySelector('.btn-add')
            .addEventListener('click', function(e){
                const element = document.querySelector('input[type=text]').value;
                const div = document.createElement('div')
                if (!element)return 
                div.innerHTML =
                    `
                    <input type='checkbox'>
                    <div class='todo__content'>${escapeHtml(element)}</div> 
                    <button class='btn-delete'>刪除</button>
                    `
                div.classList.add('todo')
                div.classList.add('todo')
                document.querySelector('.todos').appendChild(div)

                function escapeHtml(unsafe) {
                    return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
                }
                
                }
            )

            document.querySelector('.todos').addEventListener('click', (e) => {
                if(e.target.className === 'btn-delete'){
                    e.target.parentNode.remove()
                    return
                }

                if (e.target.type === 'checkbox'){
                    e.target.parentNode.classList.toggle('todo__done')
                }
            })

    </script>
    
</body>
</html>